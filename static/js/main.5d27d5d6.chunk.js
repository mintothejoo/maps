(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),r=n(27),c=n.n(r),i=n(2),s=n(3),u=n(6),p=n(4),l=n(5),d=n(113),b=n(114),h=n(21),m=n(9),f=n(33),j=n(18),v={fill:"#000",stroke:"none"},O=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.size,n=void 0===t?20:t,o=e.onClick;return a.a.createElement("svg",{height:n,viewBox:"0 0 24 24",style:Object(j.a)({},v,{transform:"translate(".concat(-n/2,"px,").concat(-n,"px)")}),onClick:o},a.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"}))}}]),t}(o.PureComponent),y=n(63),g=n.n(y),E=n(32),w=n(64),k=n.n(w),C=5e3,T=6e4,D="https://maps-server.herokuapp.com/";console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/maps",TRANSLINK_API:"e42QtlOCITDrY6tVRTkF",BASE_URL:"https://maps-server.herokuapp.com/",MAPBOX_TOKEN:"pk.eyJ1IjoibWludG90aGVqb28iLCJhIjoiY2pvNnJ6aTZyMDBibjNwcDE5aTlzaXN3dCJ9.UYDyPnuvUpjNS7nRYarlXg"}));var L=function(e,t,n,o){return g.a.snake(e+" "+t+" "+(n||"")+" "+o).toUpperCase()},N=function(e,t,n,o,a,r,c){var i={type:e,name:t};return a&&(i.params=a),o&&(i.objectId=o),r&&(i.payload=r),c&&(i.error=c),i},I=function(e,t,n,o,a,r,c){var i,s=L(e,n,t,"STARTED"),u=L(e,n,t,"COMPLETED"),p=L(e,n,t,"FAILED");a(N(s,t,0,r,o));var l=e+(t?"/"+t:"");switch(n){case"GET":i=function(e,t){var n=[];return new Promise(function(o,a){var r=[D,e],c="";c=k.a.get(r.join("/")).withCredentials().accept("json").timeout({response:C,deadline:T}).query(t),n&&n.forEach(function(e){c.set(e[0],e[1])}),c.end(function(e,t){e?a(e,t):o(t)})})}(l,r)}if(i)return i.then(function(e){e.body.message&&E.toast.success(e.body.message),a(N(u,t,0,r,o,e.body))},function(e){401===e.status||(e.response&&e.response.body&&e.response.body.message&&E.toast.error(e.response.body.message),a(N(p,t,0,r,o,null,e.response.body)))});throw new Error('Could not find a proper method for action "'.concat(n,'"'))},_=function(e,t,n,o){return function(a){return I(e,t,"GET",o,a,n)}},B=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={viewport:{width:800,height:800,longitude:-123.120738,latitude:49.282729,zoom:12},popupInfo:null},n._updateViewport=function(e){n.setState({viewport:e})},n._renderBusMarker=function(e,t){return a.a.createElement(f.a,{key:"marker-".concat(t),longitude:e.Longitude,latitude:e.Latitude},a.a.createElement(O,{size:20,onClick:function(){return n.setState({popupInfo:e})}}))},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.actions.get("bus",null,null,{})}},{key:"componentDidUpdate",value:function(e,t,n){var o=this;e.bus.loading&&!this.props.bus.loading&&setTimeout(function(){o.props.bus.loading||o.props.actions.get("bus",null,null,{})},3e3)}},{key:"render",value:function(){var e=this.state.viewport,t=this.props.bus.busLoc;return a.a.createElement("div",{className:"map-container"},a.a.createElement(f.b,Object.assign({},e,{onViewportChange:this._updateViewport,mapboxApiAccessToken:"pk.eyJ1IjoibWludG90aGVqb28iLCJhIjoiY2pvNnJ6aTZyMDBibjNwcDE5aTlzaXN3dCJ9.UYDyPnuvUpjNS7nRYarlXg"}),t.map(this._renderBusMarker)))}}]),t}(o.Component),S=Object(h.b)(function(e){return{bus:e.busReducer}},function(e){return{actions:Object(m.bindActionCreators)({get:_},e)}})(B),A=n(69),R=n(65),U=n(66),J=n(67),M=n.n(J),P={loading:!1,error:{},busLoc:[]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;switch(n){case"BUS_GET_STARTED":return Object(j.a)({},e,{loading:!0});case"BUS_GET_COMPLETED":return Object(j.a)({},e,{busLoc:o,loading:!1});default:return e}},V=Object(m.combineReducers)({busReducer:G}),Y=Object(m.applyMiddleware)(Object(A.a)(),U.a,M.a),x=Object(m.createStore)(V,Object(R.composeWithDevTools)(Y)),z=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(h.a,{store:x},a.a.createElement(d.a,null,a.a.createElement(o.Fragment,null,a.a.createElement(b.a,{exact:!0,path:"/",component:S}))))}}]),t}(o.Component),W=(n(109),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(z,null)}}]),t}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t,n){e.exports=n(111)}},[[70,2,1]]]);
//# sourceMappingURL=main.5d27d5d6.chunk.js.map