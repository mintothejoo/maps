(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(27),c=n.n(r),i=n(2),s=n(3),u=n(6),p=n(4),l=n(5),d=n(113),b=n(114),h=n(21),m=n(9),f=n(33),j=n(18),v={fill:"#000",stroke:"none"},O=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.size,n=void 0===t?20:t,a=e.onClick;return o.a.createElement("svg",{height:n,viewBox:"0 0 24 24",style:Object(j.a)({},v,{transform:"translate(".concat(-n/2,"px,").concat(-n,"px)")}),onClick:a},o.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"}))}}]),t}(a.PureComponent),g=n(63),y=n.n(g),w=n(32),E=n(64),k=n.n(E),C=5e3,T=6e4,D="https://maps-server.herokuapp.com/api";var L=function(e,t,n,a){return y.a.snake(e+" "+t+" "+(n||"")+" "+a).toUpperCase()},S=function(e,t,n,a,o,r,c){var i={type:e,name:t};return o&&(i.params=o),a&&(i.objectId=a),r&&(i.payload=r),c&&(i.error=c),i},B=function(e,t,n,a,o,r,c){var i,s=L(e,n,t,"STARTED"),u=L(e,n,t,"COMPLETED"),p=L(e,n,t,"FAILED");o(S(s,t,0,r,a));var l=e+(t?"/"+t:"");switch(n){case"GET":i=function(e,t){var n=[];return new Promise(function(a,o){var r=[D,e],c="";c=k.a.get(r.join("/")).withCredentials().accept("json").timeout({response:C,deadline:T}).query(t),n&&n.forEach(function(e){c.set(e[0],e[1])}),c.end(function(e,t){e?o(e,t):a(t)})})}(l,r)}if(i)return i.then(function(e){e.body.message&&w.toast.success(e.body.message),o(S(u,t,0,r,a,e.body))},function(e){401===e.status||(e.response&&e.response.body&&e.response.body.message&&w.toast.error(e.response.body.message),o(S(p,t,0,r,a,null,e.response.body)))});throw new Error('Could not find a proper method for action "'.concat(n,'"'))},M=function(e,t,n,a){return function(o){return B(e,t,"GET",a,o,n)}},_=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={viewport:{width:800,height:800,longitude:-123.120738,latitude:49.282729,zoom:12},popupInfo:null},n._updateViewport=function(e){n.setState({viewport:e})},n._renderBusMarker=function(e,t){return o.a.createElement(f.a,{key:"marker-".concat(t),longitude:e.Longitude,latitude:e.Latitude},o.a.createElement(O,{size:20,onClick:function(){return n.setState({popupInfo:e})}}))},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.actions.get("bus",null,null,{})}},{key:"componentDidUpdate",value:function(e,t,n){var a=this;e.bus.loading&&!this.props.bus.loading&&setTimeout(function(){a.props.bus.loading||a.props.actions.get("bus",null,null,{})},3e3)}},{key:"render",value:function(){var e=this.state.viewport,t=this.props.bus.busLoc;return o.a.createElement("div",{className:"map-container"},o.a.createElement(f.b,Object.assign({},e,{onViewportChange:this._updateViewport,mapboxApiAccessToken:"pk.eyJ1IjoibWludG90aGVqb28iLCJhIjoiY2pvNnJ6aTZyMDBibjNwcDE5aTlzaXN3dCJ9.UYDyPnuvUpjNS7nRYarlXg"}),t.map(this._renderBusMarker)))}}]),t}(a.Component),A=Object(h.b)(function(e){return{bus:e.busReducer}},function(e){return{actions:Object(m.bindActionCreators)({get:M},e)}})(_),I=n(69),x=n(65),G=n(66),J=n(67),R=n.n(J),U={loading:!1,error:{},busLoc:[]},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"BUS_GET_STARTED":return Object(j.a)({},e,{loading:!0});case"BUS_GET_COMPLETED":return Object(j.a)({},e,{busLoc:a,loading:!1});default:return e}},N=Object(m.combineReducers)({busReducer:z}),P=Object(m.applyMiddleware)(Object(I.a)(),G.a,R.a),V=Object(m.createStore)(N,Object(x.composeWithDevTools)(P)),W=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,{store:V},o.a.createElement(d.a,{basename:"/maps"},o.a.createElement(a.Fragment,null,o.a.createElement(b.a,{exact:!0,path:"/",component:A}))))}}]),t}(a.Component),Y=(n(109),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(W,null)}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t,n){e.exports=n(111)}},[[70,2,1]]]);
//# sourceMappingURL=main.15f3a35f.chunk.js.map